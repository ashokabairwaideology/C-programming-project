(function(g){if(!g.Contemplate){var b,q=0,l={},h={},m={},k={},n="<%",f="%>",i=0,o=0,j=0,r=["if","elseif","else","endif","for","elsefor","endfor","embed","include"],p=["l","s","n","f","concat"],d={functions:null,controlConstructs:null,forExpr:null,quotes:null,specials:null,replacements:null},s=function(a,b){var c=null;this.id=null;if(a)this.id=a,c=b;this.setId=function(a){if(a)this.id=a;return this};this.render=function(a){if(c)return c(a);return""}};b={CACHE_TO_DISK_NONE:0,CACHE_TO_DISK_AUTOUPDATE:2,
CACHE_TO_DISK_NOUPDATE:4,init:function(){d.controlConstructs=RegExp("\\t\\s*%("+r.join("|")+")\\b\\s*\\((.*)\\)","g");d.forExpr=/^\s*\$([a-z0-9_]+?)\s* as \s*\$([a-z0-9_]+?)\s*=>\s*\$([a-z0-9_]+)\s*$/i;d.quotes=/'/g;d.specials=/[\r\t]/g;d.replacements=RegExp("\\t\\s*(.*?)\\s*"+f,"g");p.length&&(d.functions=RegExp("%("+p.join("|")+")\\b","g"))},setLocaleStrings:function(a){k=b.merge(k,a)},setTemplateSeparators:function(a,b){a&&(n=a);b&&(f=b);b&&(d.replacements=RegExp("\\t\\s*(.*?)\\s*"+f,"g"))},setCacheDir:function(a){$__cacheDir=
a},setCacheMode:function(){q=b.CACHE_TO_DISK_NONE},add:function(a){h=b.merge(h,a)},tpl:function(a,e){l[a]||(l[a]=b.getCachedTemplate(a));var c=l[a];return e?c.render(e):c},t_if:function(a){o++;return"'; if ("+a+") { "},t_elseif:function(a){return"'; } elseif ("+a+") { "},t_else:function(){return"'; } else { "},t_elsefor:function(){j--;return"'; } } } else { "},t_endif:function(){o--;return"'; } "},t_for:function(a){i++;j++;var a=a.match(d.forExpr),b="$"+a[1],c="$"+a[2];return"'; if ("+b+" && Object.keys("+
b+").length) { for (var "+c+" in "+b+") { if (Contemplate.hasOwn("+b+", "+c+")) { var "+("$"+a[3])+"="+b+"["+c+"]; "},t_endfor:function(){if(j==i)return i--,j--,"'; } } } ";i--;return"'; } "},t_include:function(a){return t_embed(a)},t_embed:function(a){m[a]||(m[a]=" "+b.parse(b.getTemplateContents(a))+"'; ");return m[a]},e:function(a){return a},s:function(a){return String(a)},n:function(a){return parseInt(a,10)},f:function(a){return parseFloat(a,10)},concat:function(){return Array.prototype.slice.call(arguments).join("")},
locale:function(a){if(k[a])return k[a];return a},l:function(a){return b.locale(a)},doControlConstruct:function(a){if(a[1])switch(a[1]){case "if":return b.t_if(a[2]);case "elseif":return b.t_elseif(a[2]);case "else":return b.t_else(a[2]);case "endif":return b.t_endif(a[2]);case "for":return b.t_for(a[2]);case "elsefor":return b.t_elsefor(a[2]);case "endfor":return b.t_endfor(a[2]);case "embed":case "include":return b.t_embed(a[2])}return a[0]},parseControlConstructs:function(a){a=a.split(f).join("\n");
a=a.replace(d.controlConstructs,function(a,c,d){return b.doControlConstruct([a,c,d])});return a=a.split("\n").join(f)},parse:function(a){return p.length?b.parseControlConstructs(a.replace(d.specials," ").split(n).join("\t").replace(d.quotes,"\\'").split("\n").join("' + \"\\n\" + '")).replace(d.functions,"Contemplate.$1").replace(d.replacements,"' + ( $1 ) + '").split("\t").join("'; ").split(f).join(" $__p__ += '"):b.parseControlConstructs(a.replace(d.specials," ").split(n).join("\t").replace(d.quotes,
"\\'").split("\n").join("' + \"\\n\" + '")).replace(d.replacements,"' + ( $1 ) + '").split("\t").join("'; ").split(f).join(" $__p__ += '")},getCachedTemplateName:function(a){return $__cacheDir+a.replace(/[ -]/,"_")+".tpl.js"},getCachedTemplateClass:function(a){return"Contemplate_"+a.replace(/[ -]/,"_")+"_Cached"},getTemplateContents:function(a){if(h[a])return g.document.getElementById(h[a]).innerHTML;return""},createTemplateRenderFunction:function(a){b.reset();a="for (var __n__ in $__o__) { if (Contemplate.hasOwn($__o__, __n__)) { $__o__['$'+__n__]=$__o__[__n__]; delete $__o__[__n__];} } var $__p__ = ''; with($__o__) { $__p__ += '"+
b.parse(b.getTemplateContents(a))+"'; } return $__p__;";return new Function("$__o__",a)},createCachedTemplate:function(a,e,c){b.reset();a="(function(window) { \n/* Contemplate cached template '"+a+"' */ \nif (!window.['"+c+"']) { function "+c+"($id) { this.id=$id; }; "+c+".prototype.setId=function($id) { if ($id) {this.id=$id;} return this; }; "+c+".prototype.render=function($__o__) { for (var __n__ in $__o__) { if (Contemplate.hasOwn($__o__, __n__)) { $__o__['$'+__n__]=$__o__[__n__]; delete $__o__[__n__];} } var $__p__ = ''; with($__o__) { $__p__ += '"+
b.parse(b.getTemplateContents(a))+"'; } return $__p__; }; window.['"+c+"']="+c+"; } })(window);";return b.setCachedTemplate(e,a)},getCachedTemplate:function(a){switch(q){case b.CACHE_TO_DISK_NOUPDATE:var e=b.getCachedTemplateName(a),c=b.getCachedTemplateClass(a);is_file(e)||b.createCachedTemplate(a,e,c);if(is_file(e))return include(e),$tpl=new c,$tpl.setId(a),$tpl;break;case b.CACHE_TO_DISK_AUTOUPDATE:e=b.getCachedTemplateName(a);c=b.getCachedTemplateClass(a);(!is_file(e)||filemtime(e)<=filemtime(h[a]))&&
b.createCachedTemplate(a,e,c);if(is_file(e))return include(e),$tpl=new c,$tpl.setId(a),$tpl;break;default:return new s(a,b.createTemplateRenderFunction(a))}return null},setCachedTemplate:function(){return!1},reset:function(){j=o=i=0},merge:function(){var a=Array.prototype.slice.call(arguments);if(!(a.length<1)){for(var e=a.shift(),c=0,d=a.length;c<d;c++){var f=a[c];if(f)for(var g in f)b.hasOwn(f,g)&&(e[g]=f[g])}return e}},isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"},
hasOwn:function(a,b){return a&&Object.prototype.hasOwnProperty.call(a,b)},log:function(a){g.console&&g.console.log&&console.log(a)}};g.Contemplate=b;g.Contemplate.init()}})(window);
